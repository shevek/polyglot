
	/** Reads a little-endian varint with no optimization for negative numbers. */
	private static int readVarint(@Nonnull DataInputStream in) throws IOException {
		int result = 0;
		for (int shift = 0; shift < 32; shift += 7) {
			int b = in.read();
			if (b == -1)
				throw new EOFException("Truncated varint in stream.");
			result |= (b & 0x7f) << shift;
			if ((b & 0x80) == 0)
				return result;
		}
		throw new IOException("Malformed varint in stream.");
	}

	@Nonnull
	private static int[] readVarintTable(@Nonnull DataInputStream in, @Nonnegative int sublength) throws IOException {
		int[] out = new int[readVarint(in) * sublength];
		for (int i = 0; i < out.length; i++)
			out[i] = readVarint(in);
		return out;
	}
